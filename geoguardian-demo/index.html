<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoGuardian API Demo</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è GeoGuardian API Demo</h1>
            <p>Smart Location Intelligence & Movement Analysis</p>
        </div>

        <button class="button" id="requestPermission">üìç Request Location Permission</button>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="showDemo('quality')">üìä GPS Quality</button>
            <button class="tab-button" onclick="showDemo('fusion')">üîó Location Fusion</button>
            <button class="tab-button" onclick="showDemo('batch')">üìà Batch Tracking</button>
            <button class="tab-button" onclick="showDemo('geofence')">üéØ Geofencing</button>
            <button class="tab-button" onclick="showDemo('adaptive')">‚öôÔ∏è Optimization</button>
        </div>

        <div id="status" class="status info" style="display: none;">
            Ready to test location services
        </div>

        <div id="qualityDemo" class="demo-section active">
            <div class="api-section">
                <h3>üìä GPS Signal Quality Analysis</h3>
                <p>Test the <code>/api/v1/location/test</code> endpoint to analyze GPS signal quality and get recommendations.</p>
                
                <button class="button secondary" id="testQuality" disabled>üîç Test Signal Quality</button>
                <button class="button" id="startQualityTracking" disabled>üì° Start Quality Monitoring</button>
                <button class="button danger" id="stopQualityTracking" disabled>‚èπÔ∏è Stop Monitoring</button>

                <div id="qualityDisplay" style="display: none;"></div>
                <div id="qualityResult" class="result-display"></div>
            </div>
        </div>

        <div id="fusionDemo" class="demo-section">
            <div class="api-section">
                <h3>üîó Location Fusion & Correction</h3>
                <p>Test the <code>/api/v1/fusion/fused</code> and <code>/api/v1/fusion/compare</code> endpoints to improve GPS accuracy using weighted averaging and Kalman filtering.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="fusionWeightedAveraging">
                            <input type="checkbox" id="fusionWeightedAveraging" checked> Weighted Averaging
                        </label>
                        <small>Combines multiple readings with accuracy weighting</small>
                    </div>
                    <div class="setting-group">
                        <label for="fusionKalmanFilter">
                            <input type="checkbox" id="fusionKalmanFilter"> Kalman Filter
                        </label>
                        <small>Predictive smoothing based on movement patterns</small>
                    </div>
                    <div class="setting-group">
                        <label for="fusionAggressiveness">Aggressiveness:</label>
                        <select id="fusionAggressiveness">
                            <option value="conservative">Conservative</option>
                            <option value="moderate" selected>Moderate</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                        <small>How much correction to apply</small>
                    </div>
                </div>

                <button class="button secondary" id="testFusion" disabled>üîç Test Single Fusion</button>
                <button class="button" id="testComparison" disabled>‚öñÔ∏è Compare Raw vs Fused</button>
                <button class="button" id="startFusionTracking" disabled>üì° Start Fusion Monitoring</button>
                <button class="button danger" id="stopFusionTracking" disabled>‚èπÔ∏è Stop Monitoring</button>

                <div id="fusionDisplay" style="display: none;"></div>
                <div id="fusionResult" class="result-display"></div>
            </div>
        </div>

        <div id="batchDemo" class="demo-section">
            <div class="api-section">
                <h3>üìà Batch Movement Analysis</h3>
                <p>Continuous movement analysis with 10-second intervals to demonstrate real-world GPS filtering.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="batchTransportMode">Transport Mode:</label>
                        <select id="batchTransportMode">
                            <option value="stationary" selected>Stationary</option>
                            <option value="walking">Walking</option>
                            <option value="cycling">Cycling</option>
                            <option value="driving">Driving</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="batchEnvironment">Environment:</label>
                        <select id="batchEnvironment">
                            <option value="indoor" selected>Indoor</option>
                            <option value="urban">Urban</option>
                            <option value="outdoor">Outdoor</option>
                            <option value="rural">Rural</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="batchInterval">Interval (seconds):</label>
                        <input type="number" id="batchInterval" value="10" min="5" max="30">
                    </div>
                </div>

                <button class="button" id="startBatchTracking" disabled>üèÉ Start Batch Tracking</button>
                <button class="button danger" id="stopBatchTracking" disabled>‚èπÔ∏è Stop Tracking</button>

                <div id="countdown" class="countdown">
                    Next reading in <span id="countdownValue">10</span> seconds...
                </div>

                <div class="stats" id="batchStats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-value" id="totalBatches">0</div>
                        <div class="stat-label">Total Batches</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="normalBatches">0</div>
                        <div class="stat-label">Normal</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="anomalyBatches">0</div>
                        <div class="stat-label">Anomalies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalDistance">0m</div>
                        <div class="stat-label">Total Distance</div>
                    </div>
                </div>

                <div id="batchContainer" class="batch-container" style="display: none;"></div>
            </div>
        </div>

        <div id="geofenceDemo" class="demo-section">
            <div class="api-section">
                <h3>üéØ Smart Geofence Evaluation</h3>
                <p>Test the <code>/api/v1/geofence/evaluate</code> endpoint with adaptive buffer zones and intelligent boundary detection.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="geofenceRadius">Geofence Radius (meters):</label>
                        <input type="number" id="geofenceRadius" value="50" min="10" max="500">
                        <small>Boundary radius around center point</small>
                    </div>
                    <div class="setting-group">
                        <label for="geofenceBufferMultiplier">Buffer Multiplier:</label>
                        <select id="geofenceBufferMultiplier">
                            <option value="">Auto (based on GPS quality)</option>
                            <option value="1.2">Conservative (1.2x)</option>
                            <option value="2.0">Moderate (2.0x)</option>
                            <option value="3.0">Aggressive (3.0x)</option>
                        </select>
                        <small>How much buffer zone to add</small>
                    </div>
                    <div class="setting-group">
                        <label for="geofenceGracePeriod">Exit Grace Period (seconds):</label>
                        <input type="number" id="geofenceGracePeriod" value="30" min="5" max="120">
                        <small>Time before confirming exit</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="geofenceMultiCheck" checked> Multi-Check Verification
                        </label>
                        <small>Request second reading for boundary zones</small>
                    </div>
                </div>

                <div class="geofence-setup">
                    <button class="button secondary" id="setGeofenceCenter" disabled>üìç Set Center to Current Location</button>
                    <button class="button" id="testGeofence" disabled>üéØ Test Geofence Status</button>
                    <button class="button" id="startGeofenceMonitoring" disabled>üì° Start Monitoring</button>
                    <button class="button danger" id="stopGeofenceMonitoring" disabled>‚èπÔ∏è Stop Monitoring</button>
                </div>

                <div id="geofenceCenter" class="status info" style="display: none;">
                    <strong>Geofence Center:</strong> <span id="geofenceCenterCoords">Not set</span>
                </div>

                <div id="geofenceDisplay" style="display: none;"></div>
                <div id="geofenceResult" class="result-display"></div>
            </div>
        </div>

        <div id="adaptiveDemo" class="demo-section">
            <div class="api-section">
                <h3>‚öôÔ∏è Pipeline Optimization</h3>
                <p>Test the <code>/api/v1/adaptive/optimize</code> endpoint for context-aware pipeline tuning.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="optimizationMode">Optimization Mode:</label>
                        <select id="optimizationMode">
                            <option value="adaptive" selected>Adaptive (Auto-select)</option>
                            <option value="high_accuracy">High Accuracy</option>
                            <option value="battery_saver">Battery Saver</option>
                            <option value="balanced">Balanced</option>
                        </select>
                        <small>How to prioritize accuracy vs battery</small>
                    </div>
                    <div class="setting-group">
                        <label for="targetUseCase">Target Use Case:</label>
                        <select id="targetUseCase">
                            <option value="geofencing" selected>Geofencing</option>
                            <option value="navigation">Navigation</option>
                            <option value="tracking">Tracking</option>
                            <option value="general">General</option>
                        </select>
                        <small>What you're using location for</small>
                    </div>
                    <div class="setting-group">
                        <label for="contextBattery">Battery Level (%):</label>
                        <input type="number" id="contextBattery" value="75" min="0" max="100">
                        <small>Current device battery</small>
                    </div>
                    <div class="setting-group">
                        <label for="contextMovement">Movement Pattern:</label>
                        <select id="contextMovement">
                            <option value="">Auto-detect</option>
                            <option value="stationary">Stationary</option>
                            <option value="walking">Walking</option>
                            <option value="cycling">Cycling</option>
                            <option value="driving">Driving</option>
                        </select>
                        <small>Current movement behavior</small>
                    </div>
                    <div class="setting-group">
                        <label for="contextEnvironment">Environment:</label>
                        <select id="contextEnvironment">
                            <option value="">Auto-detect</option>
                            <option value="indoor">Indoor</option>
                            <option value="urban">Urban</option>
                            <option value="outdoor">Outdoor</option>
                            <option value="rural">Rural</option>
                            <option value="highway">Highway</option>
                        </select>
                        <small>Current environment</small>
                    </div>
                    <div class="setting-group">
                        <label for="contextPriority">App Priority:</label>
                        <select id="contextPriority">
                            <option value="foreground" selected>Foreground</option>
                            <option value="background">Background</option>
                            <option value="critical">Critical</option>
                        </select>
                        <small>How important is this app</small>
                    </div>
                </div>

                <button class="button secondary" id="testOptimization" disabled>üîç Get Recommendations</button>
                <button class="button" id="analyzeContext" disabled>üìä Analyze Context</button>

                <div id="optimizationDisplay" style="display: none;"></div>
                <div id="optimizationResult" class="result-display"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <h3>üìù Activity Log</h3>
        <div id="logs" class="logs">
            <div class="log-entry">
                <span class="log-timestamp">[Ready]</span> GeoGuardian API Demo initialized
            </div>
        </div>
        <button class="button small" onclick="clearLogs()" style="margin-top: 12px; background: #6b7280;">Clear Logs</button>
    </div>

    <script src="script.js"></script>
</body>
</html>