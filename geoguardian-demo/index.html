<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoGuardian API Demo</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è GeoGuardian API Demo</h1>
            <p>Smart Location Intelligence & Movement Analysis</p>
        </div>

        <button class="button" id="requestPermission">üìç Request Location Permission</button>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="showDemo('quality')">üìä GPS Quality</button>
            <button class="tab-button" onclick="showDemo('fusion')">üîó Location Fusion</button>
            <button class="tab-button" onclick="showDemo('batch')">üìà Batch Tracking</button>
        </div>

        <div id="status" class="status info" style="display: none;">
            Ready to test location services
        </div>

        <!-- GPS Quality Demo -->
        <div id="qualityDemo" class="demo-section active">
            <div class="api-section">
                <h3>üìä GPS Signal Quality Analysis</h3>
                <p>Test the <code>/api/v1/location/test</code> endpoint to analyze GPS signal quality and get recommendations.</p>
                
                <button class="button secondary" id="testQuality" disabled>üîç Test Signal Quality</button>
                <button class="button" id="startQualityTracking" disabled>üì° Start Quality Monitoring</button>
                <button class="button danger" id="stopQualityTracking" disabled>‚èπÔ∏è Stop Monitoring</button>

                <div id="qualityDisplay" style="display: none;"></div>
                <div id="qualityResult" class="result-display"></div>
            </div>
        </div>

        <!-- Location Fusion Demo -->
        <div id="fusionDemo" class="demo-section">
            <div class="api-section">
                <h3>üîó Location Fusion & Correction</h3>
                <p>Test the <code>/api/v1/fusion/fused</code> and <code>/api/v1/fusion/compare</code> endpoints to improve GPS accuracy using weighted averaging and Kalman filtering.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="fusionWeightedAveraging">
                            <input type="checkbox" id="fusionWeightedAveraging" checked> Weighted Averaging
                        </label>
                        <small>Combines multiple readings with accuracy weighting</small>
                    </div>
                    <div class="setting-group">
                        <label for="fusionKalmanFilter">
                            <input type="checkbox" id="fusionKalmanFilter"> Kalman Filter
                        </label>
                        <small>Predictive smoothing based on movement patterns</small>
                    </div>
                    <div class="setting-group">
                        <label for="fusionAggressiveness">Aggressiveness:</label>
                        <select id="fusionAggressiveness">
                            <option value="conservative">Conservative</option>
                            <option value="moderate" selected>Moderate</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                        <small>How much correction to apply</small>
                    </div>
                </div>

                <button class="button secondary" id="testFusion" disabled>üîç Test Single Fusion</button>
                <button class="button" id="testComparison" disabled>‚öñÔ∏è Compare Raw vs Fused</button>
                <button class="button" id="startFusionTracking" disabled>üì° Start Fusion Monitoring</button>
                <button class="button danger" id="stopFusionTracking" disabled>‚èπÔ∏è Stop Monitoring</button>

                <div id="fusionDisplay" style="display: none;"></div>
                <div id="fusionResult" class="result-display"></div>
            </div>
        </div>

        <!-- Batch Tracking Demo -->
        <div id="batchDemo" class="demo-section">
            <div class="api-section">
                <h3>üìà Batch Movement Analysis</h3>
                <p>Continuous movement analysis with 10-second intervals to demonstrate real-world GPS filtering.</p>

                <div class="settings">
                    <div class="setting-group">
                        <label for="batchTransportMode">Transport Mode:</label>
                        <select id="batchTransportMode">
                            <option value="stationary" selected>Stationary</option>
                            <option value="walking">Walking</option>
                            <option value="cycling">Cycling</option>
                            <option value="driving">Driving</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="batchEnvironment">Environment:</label>
                        <select id="batchEnvironment">
                            <option value="indoor" selected>Indoor</option>
                            <option value="urban">Urban</option>
                            <option value="outdoor">Outdoor</option>
                            <option value="rural">Rural</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="batchInterval">Interval (seconds):</label>
                        <input type="number" id="batchInterval" value="10" min="5" max="30">
                    </div>
                </div>

                <button class="button" id="startBatchTracking" disabled>üèÉ Start Batch Tracking</button>
                <button class="button danger" id="stopBatchTracking" disabled>‚èπÔ∏è Stop Tracking</button>

                <div id="countdown" class="countdown">
                    Next reading in <span id="countdownValue">10</span> seconds...
                </div>

                <div class="stats" id="batchStats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-value" id="totalBatches">0</div>
                        <div class="stat-label">Total Batches</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="normalBatches">0</div>
                        <div class="stat-label">Normal</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="anomalyBatches">0</div>
                        <div class="stat-label">Anomalies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalDistance">0m</div>
                        <div class="stat-label">Total Distance</div>
                    </div>
                </div>

                <div id="batchContainer" class="batch-container" style="display: none;"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <h3>üìù Activity Log</h3>
        <div id="logs" class="logs">
            <div class="log-entry">
                <span class="log-timestamp">[Ready]</span> GeoGuardian API Demo initialized
            </div>
        </div>
        <button class="button small" onclick="clearLogs()" style="margin-top: 12px; background: #6b7280;">Clear Logs</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
